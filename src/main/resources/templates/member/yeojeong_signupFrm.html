<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>회원가입</title>
    <link rel="stylesheet" href="/css/yeojeong_signUp.css">
    <script src="/javascript/jquery-3.7.0.js"></script>
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=q0icanumdd&submodules=geocoder"></script>
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>

	<th:block th:include="common/header"></th:block>
	
	<div class="wrab-content">	
	    <div class="join-all-wrap">
	        <div class="join-wrap">
	            <div class="join-title">
	                <h1>회원가입</h1>
	                <h3><sup class="star">*</sup>필수입력사항</h3>
	                <hr>
	            </div>
	            <div class="join-content">
					<form name="checkIdFrm" action="/member/checkId" method="post">
	                    <input type="hidden" name="checkId">
	                </form>
					<form name="checkEmailFrm" action="/member/checkEmail" method="post">
	                    <input type="hidden" name="checkEmail">
	                </form>
					
	                <form action="/member/signup" method="post" id="signupFrm">
	                    <div class="input-wrap">                      
	                            <div class="label-wrap">
	                                <label for="memberId">아이디<sup class="star">*</sup></label>
	                            </div>
	                            <input type="text" name="memberId" id="memberId" class="input-form id_confirm" placeholder="아이디를 입력해주세요" required>
	                            <span class="button-wrap">
	                                <button type="button" id="idChkBtn" class="dup-btn">중복확인</button>
	                            </span>                                                                                          
	                    </div>
	                    <div class="comment-wrap">
	                        <div id="id_comment" style="display: none;"></div> 
	                    </div>                       
	                    <div class="input-wrap">    
	                        <div class="label-wrap">
	                            <label for="memberPw">비밀번호<sup class="star">*</sup></label>
	                        </div>
	                            <input type="password" name="memberPw" id="memberPw" class="input-form" placeholder="비밀번호를 입력해주세요" required>	                        
	                    </div>
						<div class="comment-wrap">
	                        <div id="pw_comment" style="display: none;"></div> 
	                    </div>    
	                    <div class="input-wrap">                        
	                        <div class="label-wrap">
	                            <label for="memberPwre">비밀번호 확인<sup class="star">*</sup></label>
	                        </div>
	                            <input type="password" name="memberPwre" id="memberPwre" class="input-form" placeholder="비밀번호를 한번 더 입력해주세요" required>	                        
	                    </div>
						<div class="comment-wrap">
	                        <div id="pwre_comment" style="display: none;"></div> 
	                    </div>    
	                    <div class="input-wrap">                        
	                        <div class="label-wrap">
	                            <label for="memberName">이름<sup class="star">*</sup></label>
	                        </div>
	                            <input type="text" name="memberName" id="memberName" class="input-form" placeholder="이름을 입력해주세요" required>	                        
	                    </div>
						<div class="comment-wrap">
	                        <div id="name_comment"></div> 
	                    </div>    
	                    <div class="input-wrap">                        
	                        <div class="label-wrap">
	                            <label for="memberPhone">연락처<sup class="star">*</sup></label>
	                        </div>
	                            <input type="text" name="memberPhone" id="memberPhone" class="input-form" placeholder="전화번호를 입력해주세요(예:01023233434)" required>
	                    </div>
						<div class="comment-wrap">
	                        <div id="phone_comment"></div> 
	                    </div>    
	                    <div class="input-wrap">                        
	                        <div class="label-wrap">
	                            <label for="memberEmail">이메일<sup class="star">*</sup></label>
	                        </div>
	                            <input type="text" name="memberEmail" id="memberEmail" class="input-form" placeholder="예: essential@essential.com" required>
	                        <span class="button-wrap">
	                            <button type="button" id="emailChkBtn" class="dup-btn">중복확인</button>
	                        </span>                        
	                    </div>
						<div class="comment-wrap">
	                        <div id="email_comment"></div> 
	                    </div>
	                    <div class="input-wrap">                        
	                        <div class="label-wrap">
	                            <label for="memberEmailre">이메일 확인<sup class="star">*</sup></label>
	                        </div>
	                            <input type="text" name="memberEmailre" id="memberEmailre" class="input-form" placeholder="이메일을 입력해주세요" required>
	                            <span class="button-wrap">
	                                <button type="button" id="emailauthBtn" class="auth-btn">인증번호 받기</button>
	                            </span>                           
	                    </div>
						<div class="comment-wrap">
	                        <div id="emailre_comment"></div> 
	                    </div>
	                    <div class="input-wrap">
	                        <div class="label-wrap">
	                            <label for="authCode"></label>
	                        </div>
	                        <input type="text" name="authCode" id="authCode" class="input-form"  placeholder="인증번호입력"  required>
							<span id="timeZone"></span>
							<span id="authMsg"></span> 
	                    </div>
						<div class="comment-wrap">
	                        <div id="auth_comment"></div> 
	                    </div>
	                    <div class="input-wrap">                        
	                        <div class="label-wrap">
	                            <label for="memberAddr">배송지<sup class="star">*</sup></label>
	                        </div>
	                            <input type="text" name="memberAddr" id="memberAddr" class="input-form" placeholder="배송지를 등록해주세요" readonly>
	                            <span class="button-wrap">
	                                <button type="button" id="addrBtn" class="addr-btn" onclick="searchAddress();">배송지 등록</button>
	                            </span> 	                                                                                
	                    </div>
						<div class="input-wrap">                        
	                        <div class="label-wrap">
	                            <label for="memberAddr"></label>
	                        </div>
								<input type="text" name="detail" id="detail" class="input-form" placeholder="상세주소를 입력해 주세요">
	                            <span class="button-wrap">	                               
	                            </span>   	                            	                                                     
	                    </div>
	                    <div class="input-wrap">
	                        <div class="label-wrap">
	                            <label for="addrInfo"></label>
	                        </div>
	                            <span class="addrInfo">배송지에 따라 정보가 달라질 수 있습니다.</span>
	                        
	                    </div>
	                    <div class="input-wrap">                        
	                        <div class="label-wrap">
	                            <label for="memberGender">성별</label>
	                        </div>
	                        <div class="gender-wrap">
	                            <div class="gender-m">
	                                <input type="radio" name="memberGender" id="m" value="m">
	                                <label for="m">남자</label>
	                            </div>
	                            <div class="gender-f">
	                                <input type="radio" name="memberGender" id="f" value="f">
	                                <label for="f">여자</label>
	                            </div>
	                            <div class="gender-n">
	                                <input type="radio" name="memberGender" id="n" value="n">
	                                <label for="n">선택안함</label>
	                            </div>
	                        </div>                       
	                    </div>
	                    <div class="input-wrap">               
	                        <div class="label-wrap">
	                            <label for="memberBirthdate">생년월일</label>
	                        </div>
	                            <input type="text" name="birthDate" id="memberBirthdate" class="input-form" placeholder="YYYY/MM/DD">
	                        
	                    </div>
	                    <hr>
	                    <div class="agree-whole-wrap">  
	                        <div class="label-wrap">                   
	                            <label for="agreement">이용약관 동의<sup class="star">*</sup></label>
	                        </div>  
	                        <div class="agree-wrap">
	                            <div class="agreeBox">                            
	                                <input type="checkbox" id="allAgreement" class="agreeCheck">
	                                <label for="allAgreement">전체 동의합니다.</label>
	                            </div>
	                            <div class="agreeBox">
	                                <input type="checkbox" id="mustAgreement" class="agreeCheck">
	                                <label for="mustAgreement">이용약관 동의<span class="must">(필수)</span></label><a href="#" class="showAgree">약관보기></a>
	                            </div>
	                            <div class="agreeBox">
	                                <input type="checkbox" id="privacyAgreement" class="agreeCheck">
	                                <label for="privacyAgreement">개인정보 수집 및 이용 동의<span class="must">(필수)</span></label><a href="#" class="showAgree">약관보기></a>
	                            </div>
	                            <div class="agreeBox">
	                                <input type="checkbox" id="optionalAgreement" class="agreeCheck">
	                                <label for="optionalAgreement">개인정보 수집 및 이용 동의<span class="must">(선택)</span></label><a href="#" class="showAgree">약관보기></a>
	                            </div>
	                            <div class="agreeBox">
	                                <input type="checkbox" id="ageAgreement" class="agreeCheck">
	                                <label for="ageAgreement">본인은 만 14세 이상입니다.<span class="must">(필수)</span></label>
	                            </div>
	                        </div>                        
	                    </div>
	                    <div class="signin-btn">
	                        <button type="submit" id="signinBtn">가입하기</button>                        
	                    </div>
	                </form>
	            </div><!--join-title-->
	        </div><!--join-wrap-->
	    </div><!--join-all-wrap-->
		<div id="idChkModal1" class="modal">
			<div class="modal_body">				
					<p class="idconditionChk">6자 이상 16자 이하의 영문과 숫자를 조합</p>								
					<div class="modal-foot">						
						<button type="button" class="chkBtn">확인</button>						
					</div>			
			</div>
		</div>
		<div id="idChkModal2" class="modal">
			<div class="modal_body">				
					<p class="idImpossible">사용 불가능한 아이디입니다.</p>					
					<div class="modal-foot">						
						<button type="button" class="chkBtn">확인</button>						
					</div>			
			</div>
		</div>
		<div id="idChkModal3" class="modal">
			<div class="modal_body">				
					<p class="idPossible">사용할 수 있는 아이디입니다.</p>				
					<div class="modal-foot">						
						<button type="button" class="chkBtn">확인</button>						
					</div>			
			</div>
		</div>
		<div id="emailChkModal1" class="modal">
			<div class="modal_body">				
					<p class="emailConditionChk">이메일을 입력해 주세요.</p>				
					<div class="modal-foot">						
						<button type="button" class="chkBtn">확인</button>						
					</div>			
			</div>
		</div>
		<div id="emailChkModal2" class="modal">
			<div class="modal_body">				
					<p class="emailImpossible">사용 불가능한 이메일입니다.</p>				
					<div class="modal-foot">						
						<button type="button" class="chkBtn">확인</button>						
					</div>			
			</div>
		</div>
		<div id="emailChkModal3" class="modal">
			<div class="modal_body">				
					<p class="emailPossible">사용 가능한 이메일입니다.</p>				
					<div class="modal-foot">						
						<button type="button" class="chkBtn">확인</button>						
					</div>			
			</div>
		</div>
	</div> <!-- <div class="wrab-content"> -->
    
    <th:block th:include="common/footer"></th:block>
    <script src="/javascript/yeojeong_button.js"></script>
    <script src="/javascript/yeojeong_signUp.js"></script>
	<script>
		const map = new naver.maps.Map("map",{
			center : new naver.maps.LatLng(37.533837, 126.896836),
			zoom : 17,
			zoomControl : true,
			zoomControlOptions : {
				position : naver.maps.Position.TOP_RIGHT,
				style : naver.maps.ZoomControlStyle.SMALL
			}
		});//상단의 script가 선행이 되어야 이 객체를 사용할 수 있음.
		const marker = new naver.maps.Marker({
			position : new naver.maps.LatLng(37.533837, 126.896836),
			map : map
		});
		
		let infoWindow = new naver.maps.InfoWindow();
		let contentString = [
			"<div class='iw_inner'>",
			"	<h3>KH정보교육원</h3>",
			"	<p>서울시 영등포구 선유2로 57 이레빌딩 19F A강의장</p>",
			"</div>"
		].join("");
		//marker에 클릭이벤트 추가
		naver.maps.Event.addListener(marker,"click",function(e){
			infoWindow = new naver.maps.InfoWindow({
				content : contentString
				
			});
			//태그를 넣은 infoWindow를 map의 marker위에 생성
			infoWindow.open(map, marker);
			
		});
		//map에 클릭이벤트 추가
		naver.maps.Event.addListener(map,"click",function(e){
			console.log(e);
			marker.setPosition(e.coord);//클릭한 위치로 마커 이동
			map.setCenter(e.coord);//클릭한 위치로 지도 중심 이동
			if(infoWindow.getMap()){//정보창이 지도에 보이는 상태면
				infoWindow.close();
			}
			
			//위경도를 통해서 해당 위치의 주소를 구하는 코드(reverseGeocode)
			naver.maps.Service.reverseGeocode({//위경도 알려줌
				location : e.coord
			},function(status,response){//주소검색에 대한 결과를 받아옴
				console.log(response);
				const address = response.result.items[1].address;
				console.log(address);
				contentString = [
					"<div class='iw_inner'>",
					"	<p>"+address+"</p>",
					"</div>"
				].join("");
			});
		});
		function searchAddress(){
			new daum.Postcode({
				oncomplete : function(data){
					console.log(data);					
					$("#memberAddr").val(data.roadAddress);
					$("#detail").focus();
				}
			}).open();
		}
		
	</script>
</body>
</html>